{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 136, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Ishika/Desktop/compaignwalaPro/Codessy/codessey/src/app/api/contact/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\r\nimport nodemailer from \"nodemailer\";\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const { name, email, message, queryMessage } = await request.json();\r\n\r\n    if (!name || !email || !message) {\r\n      return NextResponse.json(\r\n        { error: \"Name, email, and message are required\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    if (!process.env.ADMIN_EMAIL || !process.env.ADMIN_EMAIL_PASSWORD) {\r\n      console.error(\"Missing environment variables for email configuration\");\r\n      return NextResponse.json(\r\n        { error: \"Email configuration missing\" },\r\n        { status: 500 }\r\n      );\r\n    }\r\n\r\n    // âœ… Configure transporter\r\n    const transporter = nodemailer.createTransport({\r\n      service: \"gmail\",\r\n      auth: {\r\n        user: process.env.ADMIN_EMAIL,\r\n        pass: process.env.ADMIN_EMAIL_PASSWORD,\r\n      },\r\n    });\r\n\r\n    // âœ… Styled Admin Email\r\n    const adminHtml = `\r\n      <div style=\"font-family: Arial, sans-serif; background-color: #f8f9fa; padding: 20px;\">\r\n        <div style=\"max-width: 600px; margin: auto; background: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);\">\r\n          <h2 style=\"color: #2d3436; text-align: center;\">ðŸ“© New Contact Form Submission</h2>\r\n          <p><strong>Name:</strong> ${name}</p>\r\n          <p><strong>Email:</strong> ${email}</p>\r\n          <p><strong>Message:</strong><br>${message}</p>\r\n          ${\r\n            queryMessage\r\n              ? `<p><strong>Query:</strong><br>${queryMessage}</p>`\r\n              : \"\"\r\n          }\r\n          <hr style=\"border: none; border-top: 1px solid #ddd; margin: 20px 0;\">\r\n          <p style=\"font-size: 14px; color: #636e72;\">Submitted At: ${new Date().toLocaleString()}</p>\r\n        </div>\r\n      </div>\r\n    `;\r\n\r\n    // âœ… Styled User Email\r\n    const userHtml = `\r\n      <div style=\"font-family: 'Segoe UI', sans-serif; background-color: #fafafa; padding: 20px;\">\r\n        <div style=\"max-width: 600px; margin: auto; background: #ffffff; border-radius: 10px; padding: 25px; box-shadow: 0 3px 10px rgba(0,0,0,0.1);\">\r\n          <h2 style=\"text-align: center; color: #4a90e2;\">Thank You for Contacting Us, ${name}! ðŸŒŸ</h2>\r\n          <p style=\"font-size: 16px; color: #333;\">Weâ€™ve received your message and will get back to you shortly.</p>\r\n          \r\n          <div style=\"background: #f0f8ff; border-left: 4px solid #4a90e2; padding: 10px 15px; margin-top: 15px;\">\r\n            <p><strong>Your Message:</strong><br>${message}</p>\r\n            ${\r\n              queryMessage\r\n                ? `<p><strong>Your Query:</strong><br>${queryMessage}</p>`\r\n                : \"\"\r\n            }\r\n          </div>\r\n\r\n          <p style=\"margin-top: 20px; font-size: 15px; color: #555;\">\r\n            In the meantime, you can explore our website for more information.<br>\r\n            Thank you for reaching out to <strong>Codessy Team</strong> ðŸ’»\r\n          </p>\r\n\r\n          <hr style=\"border: none; border-top: 1px solid #ddd; margin: 25px 0;\">\r\n          <p style=\"text-align: center; color: #888; font-size: 13px;\">\r\n            Best Regards,<br>\r\n            <strong>Manya Shukla</strong><br>\r\n            Codessy Support Team\r\n          </p>\r\n        </div>\r\n      </div>\r\n    `;\r\n\r\n    // âœ… Send to Admin\r\n    await transporter.sendMail({\r\n      from: process.env.ADMIN_EMAIL,\r\n      to: process.env.ADMIN_EMAIL,\r\n      subject: `New Contact from ${name}`,\r\n      html: adminHtml,\r\n    });\r\n\r\n    // âœ… Send to User\r\n    await transporter.sendMail({\r\n      from: process.env.ADMIN_EMAIL,\r\n      to: email,\r\n      subject: \"Thank you for contacting us!\",\r\n      html: userHtml,\r\n    });\r\n\r\n    return NextResponse.json(\r\n      { message: \"Emails sent successfully\" },\r\n      { status: 200 }\r\n    );\r\n  } catch (err: unknown) {\r\n    if (err instanceof Error) {\r\n      console.error(\"Error sending email:\", err.message);\r\n      return NextResponse.json({ error: err.message }, { status: 500 });\r\n    }\r\n\r\n    console.error(\"Unknown error:\", err);\r\n    return NextResponse.json(\r\n      { error: \"An unknown error occurred\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,YAAY,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEjE,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,SAAS;YAC/B,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAwC,GACjD;gBAAE,QAAQ;YAAI;QAElB;QAEA,IAAI,CAAC,QAAQ,GAAG,CAAC,WAAW,IAAI,CAAC,QAAQ,GAAG,CAAC,oBAAoB,EAAE;YACjE,QAAQ,KAAK,CAAC;YACd,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA8B,GACvC;gBAAE,QAAQ;YAAI;QAElB;QAEA,0BAA0B;QAC1B,MAAM,cAAc,4JAAU,CAAC,eAAe,CAAC;YAC7C,SAAS;YACT,MAAM;gBACJ,MAAM,QAAQ,GAAG,CAAC,WAAW;gBAC7B,MAAM,QAAQ,GAAG,CAAC,oBAAoB;YACxC;QACF;QAEA,uBAAuB;QACvB,MAAM,YAAY,CAAC;;;;oCAIa,EAAE,KAAK;qCACN,EAAE,MAAM;0CACH,EAAE,QAAQ;UAC1C,EACE,eACI,CAAC,8BAA8B,EAAE,aAAa,IAAI,CAAC,GACnD,GACL;;oEAEyD,EAAE,IAAI,OAAO,cAAc,GAAG;;;IAG9F,CAAC;QAED,sBAAsB;QACtB,MAAM,WAAW,CAAC;;;uFAGiE,EAAE,KAAK;;;;iDAI7C,EAAE,QAAQ;YAC/C,EACE,eACI,CAAC,mCAAmC,EAAE,aAAa,IAAI,CAAC,GACxD,GACL;;;;;;;;;;;;;;;;IAgBT,CAAC;QAED,kBAAkB;QAClB,MAAM,YAAY,QAAQ,CAAC;YACzB,MAAM,QAAQ,GAAG,CAAC,WAAW;YAC7B,IAAI,QAAQ,GAAG,CAAC,WAAW;YAC3B,SAAS,CAAC,iBAAiB,EAAE,MAAM;YACnC,MAAM;QACR;QAEA,iBAAiB;QACjB,MAAM,YAAY,QAAQ,CAAC;YACzB,MAAM,QAAQ,GAAG,CAAC,WAAW;YAC7B,IAAI;YACJ,SAAS;YACT,MAAM;QACR;QAEA,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,SAAS;QAA2B,GACtC;YAAE,QAAQ;QAAI;IAElB,EAAE,OAAO,KAAc;QACrB,IAAI,eAAe,OAAO;YACxB,QAAQ,KAAK,CAAC,wBAAwB,IAAI,OAAO;YACjD,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO,IAAI,OAAO;YAAC,GAAG;gBAAE,QAAQ;YAAI;QACjE;QAEA,QAAQ,KAAK,CAAC,kBAAkB;QAChC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA4B,GACrC;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}